#!/bin/bash

##### DISTRIBUTION SETTINGS #####
# distribution type
# тип дистрибутива
# [debian]
DISTRIBUTION_TYPE="debian"

# distribution
# дистрибутив
# [stretch, buster, bullseye, bookworm, sid, kali-rolling, orel]
DISTRIBUTION="bullseye"

# distribution arch
# архитектура дистрибутива
# [amd64, i386, i386-pae]
DISTRIBUTION_ARCH="amd64"

# окружение рабочего стола
# desktop environment
# [core, xfce, slax, xfce-frugal]
DESKTOP_ENVIRONMENT="xfce"

# system variant, indicates the used list of packages in modules
# вариант системы, указывает на используемый список пакетов в модулях
# [minimum, standard, maximum, ultra, frugal]
PACKAGE_VARIANT="standard"

# тип сжатия
# compresssion type
# stretch: [xz, lzo, gz]
# buster+: [xz, lzo, gz, lz4, zstd]
COMP_TYPE="zstd"

###########################

##### KERNEL SETTINGS #####
# [default, rt, cloud, pve, ubuntu, ubuntu-hwe]
KERNEL_TYPE="default"

# Linux kernel from backports
# Ядро из бэкпортов
# [true, false]
KERNEL_BPO="false"

# Debian kernel with AUFS support
# Ядро Debian с поддержкой AUFS
# [true, false]
KERNEL_AUFS="false"

# [livekit, uird]
INITRD_TYPE="livekit"

# If true, then the names of initrfs.img and vmlinuz will indicate the version of the kernel for which they are intended.
# Если true, то имена initrfs.img и vmlinuz будут указывать на версию ядра, для которой они предназначены.
# [true, false]
NAMED_BOOT_FILES="false"

# If true, then initrfs.img and vmlinuz will be copied to the minios-install/build/[distribution name]/kernel folder when the kernel is installed.
# Если true, то initrfs.img и vmlinuz будут скопированы в папку minios-install/build/[distribution name]/kernel при установке ядра.
# [true, false]
EXPORT_KERNEL="false"

# If true, then initrfs.img and vmlinuz will be moved to the minios-install/build/[distribution name]/kernel folder when the kernel is installed.
# Если true, то initrfs.img и vmlinuz будут перемещены в папку minios-install/build/[distribution name]/kernel при установке ядра.
# [true, false]
MOVE_KERNEL="false"
###########################

##### LOCALE&TIMEZONE SETTINGS #####
# [en_US, ru_RU]
LOCALE="en_US"
# Изменять часовой пояс необязательно, система автоматически определяет часовой пояс и устанавливает его по текущему местоположению при наличии доступа в Интернет.
# It is not necessary to change the time zone, the system automatically determines the time zone and sets it to the current location if you have Internet access.
# [any timezone]
TIMEZONE="Etc/UTC"
###########################

##### minios.conf SETTINGS #####
USER_NAME="live"
USER_PASSWORD="evil"
ROOT_PASSWORD="toor"
# this option no longer works
# этот параметр больше не работает
DEFAULT_TARGET="graphical"
# this option no longer works
# этот параметр больше не работает
ENABLE_SERVICES="ssh,firewalld"
# this option no longer works
# этот параметр больше не работает
DISABLE_SERVICES=""
# [true, false]
SCRIPTS="true"
# [true, false]
SSH="true"
# file name in the minios folder where the system will look for the ssh public key
# имя файла в папке minios в котором система будет искать публичный ключ ssh
# [any file name]
SSH_KEY="authorized_keys"
# [true, false]
CLOUD="false"
# Hide credentials displayed as a hint in the console
# Скрыть учётные данные, отображаемые в качестве подсказки в консоли
# [true, false]
HIDE_CREDENTIALS="false"
###########################

# bootstrap variant (used to build Ubuntu)
# вариант bootstrap (используется для сборки Ubuntu)
DISTRIBUTION_VARIANT="minbase"

# path of the log file
# путь файла лога
LOGPATH="/var/log"

# default is output to stdout. you can use OUTPUT="$LOGPATH/$LIVEKITNAME.log" if you want to route events to log file.
# по умолчанию выводится на стандартный вывод. вы можете использовать OUTPUT="$LOGPATH/$LIVEKITNAME.log", если хотите направлять события в файл журнала.
OUTPUT="/dev/stdout"
#OUTPUT="$LOGPATH/$LIVEKITNAME.log"
#OUTPUT="/dev/null"

# if ="true", creates a second iso with a constant filename
# если ="true", создаёт второй iso с постоянным именем файла
# [true, false]
BUILD_TEST_ISO="true"

# removes old iso files for this build type
# удаляет старые файлы iso для данного типа сборки
# [true, false]
REMOVE_OLD_ISO="true"

# if ="true", creates a copy of minios-live in chroot /opt
# если ="true", создаёт копию minios-live в chroot /opt
DEV_SYSTEM="false"

# if true, when building the system installs the sources in /opt/minios-live
# если истина, при сборке системы устанавливает исходные коды в /opt/minios-live
# [true, false]
DOWNLOAD_SOURCES="false"

# if ="true", creates backup in parent folder
# если ="true", создаёт резервную копию в родительской папке
# [true, false]
CREATE_BACKUP="false"

# [noninteractive, dialog, text]
DEBIAN_FRONTEND_TYPE="dialog"

APT_CMD="apt-get"
APT_OPTIONS="-y"

# iso type
# тип iso
# [hybrid]
BOOT_TYPE="hybrid"

# union type used to build the system
# тип union, используемый для сборки системы
# [aufs, overlayfs]
UNION_BUILD_TYPE="overlayfs"

# Used when assigned to the ISO name when building minios-live
# Используется при назначении имени ISO при сборке minios-live
SYSTEMNAME="MiniOS"

# using a ready-made bootstrap file during installation. If absent, then it is downloaded and packaged. Subsequent builds unpack the existing bootstrap.
# использование готового файла bootstrap при установке. Если отсутствует, то скачивается и упаковывается. При последующих сборках распаковывается существующий файл bootstrap.
# [true, false]
USE_BOOTSTRAP="true"

# using a ready-made rootfs file during installation. If absent, then it is downloaded and packaged. Subsequent builds will unpack the existing rootfs file.
# использование готового файла rootfs при установке. Если отсутствует, то скачивается и упаковывается. При последующих сборках распаковывается существующий файл rootfs.
# [true, false]
USE_ROOTFS="true"

# [true, false]
USE_MX_REPO="false"
# [true, false]
USE_ANTIX_REPO="false"

# if true, then the installation of packages required for the build is skipped
# если истина, то пропускается установка пакетов, необходимых для сборки
# [true, false]
SKIP_SETUP_HOST="false"

# deleting sources after building
# удаление исходников после сборки
# [true, false]
REMOVE_SOURCES="false"

# if true, then removes the dpkg base from the module (it is necessary so that additional modules do not break the common base if they do not use the cumulative structure of modules and are built relative to a certain level, and not relative to all system modules)
# если истина, то удаляет базу dpkg из модуля (нужно для того, чтобы дополнительные модули не ломали общую базу, если они не используют накопительную структуру модулей и собираются относительно определённого уровня, а не относительно всех модулей системы)
# [true, false]
REMOVE_DPKG_DB="false"

# [true, false]
REMOVE_LARGE_ICONS="true"

# if true, then when building modules from within the system, allows you to set the maximum level at which modules will be built
# for example, level 4 is a build relative to modules 01-core, 01-firmware, 02-xorg, 03-desktop, 04-apps. If the module is built like this, then it will not conflict with any module built at level 4, if all modules 01-04 are present in the system.
# если истина, то при сборке модулей изнутри системы позволяет установить максимальный уровень, на котором будут собраны модули
# например, уровень 4 - это сборка относительно модулей 01-core, 01-firmware, 02-xorg, 03-desktop, 04-apps. Если модуль собран так, то он не будет конфликтовать с любым модулем, собранным на 4 уровне, если все модули 01-04 присутствуют в системе.
# [true, false]
FILTER_MODULES="false"

# modules filter level, see above
# уровень фильтра модулей, см. выше
# [0, 1, 2, 3, 4...]
FILTER_LEVEL="3"

# [true, false]
USE_UNOFFICIAL_REPOSITORY="false"

# [repo address]
UNOFFICIAL_REPOSITORY_ADDRESS="10.3.0.3"

# does not work yet
# пока не работает
# [true, false]
BUILD_FROM_SNAPSHOT="false"

# does not work yet
# пока не работает
# [snapshot date]
SNAPSHOT_DATE="20220223T214737Z"
